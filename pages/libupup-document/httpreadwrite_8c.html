<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libUPnP: /Users/mylhyz/Downloads/libupnp-1.14.18/upnp/src/genlib/net/http/httpreadwrite.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libUPnP<span id="projectnumber">&#160;1.14.18</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_500eb3075243de088213ee7b504b6a30.html">upnp</a></li><li class="navelem"><a class="el" href="dir_9eafd26b178b581de33acfe950a9348a.html">src</a></li><li class="navelem"><a class="el" href="dir_09aab03f485c1a046374c9f3e5b75075.html">genlib</a></li><li class="navelem"><a class="el" href="dir_fc9cfb719955386ce36d6a68d40f3780.html">net</a></li><li class="navelem"><a class="el" href="dir_bab5e0b8314d99cf41d35e33377f752f.html">http</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">httpreadwrite.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;config.h&quot;</code><br />
<code>#include &quot;httpreadwrite.h&quot;</code><br />
<code>#include &quot;<a class="el" href="UpnpExtraHeaders_8h_source.html">UpnpExtraHeaders.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="UpnpFileInfo_8h_source.html">UpnpFileInfo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="UpnpInet_8h_source.html">UpnpInet.h</a>&quot;</code><br />
<code>#include &quot;UpnpIntTypes.h&quot;</code><br />
<code>#include &quot;UpnpStdInt.h&quot;</code><br />
<code>#include &quot;<a class="el" href="membuffer_8h_source.html">membuffer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sock_8h_source.html">sock.h</a>&quot;</code><br />
<code>#include &quot;statcodes.h&quot;</code><br />
<code>#include &quot;unixutil.h&quot;</code><br />
<code>#include &quot;<a class="el" href="upnp_8h_source.html">upnp.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="upnpapi_8h_source.html">upnpapi.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="uri_8h_source.html">uri.h</a>&quot;</code><br />
<code>#include &quot;webserver.h&quot;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &lt;stdarg.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;posix_overwrites.h&quot;</code><br />
<code>#include &lt;arpa/inet.h&gt;</code><br />
<code>#include &lt;sys/time.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/utsname.h&gt;</code><br />
<code>#include &lt;sys/wait.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for httpreadwrite.c:</div>
<div class="dyncontent">
<div class="center"><img src="httpreadwrite_8c__incl.png" border="0" usemap="#a_2Users_2mylhyz_2Downloads_2libupnp-1_814_818_2upnp_2src_2genlib_2net_2http_2httpreadwrite_8c" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structHTTPCONNECTIONHANDLE.html">HTTPCONNECTIONHANDLE</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a518cb52278b69a6502ce7ac8cf49f2cf" id="r_a518cb52278b69a6502ce7ac8cf49f2cf"><td class="memItemLeft" align="right" valign="top"><a id="a518cb52278b69a6502ce7ac8cf49f2cf" name="a518cb52278b69a6502ce7ac8cf49f2cf"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CHUNK_HEADER_SIZE</b>&#160;&#160;&#160;(size_t)10</td></tr>
<tr class="separator:a518cb52278b69a6502ce7ac8cf49f2cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79c289e0cd9b6708be9ef777fd18588b" id="r_a79c289e0cd9b6708be9ef777fd18588b"><td class="memItemLeft" align="right" valign="top"><a id="a79c289e0cd9b6708be9ef777fd18588b" name="a79c289e0cd9b6708be9ef777fd18588b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CHUNK_TAIL_SIZE</b>&#160;&#160;&#160;(size_t)10</td></tr>
<tr class="separator:a79c289e0cd9b6708be9ef777fd18588b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27f54782b74dbce66e97202fe56f9b01" id="r_a27f54782b74dbce66e97202fe56f9b01"><td class="memItemLeft" align="right" valign="top"><a id="a27f54782b74dbce66e97202fe56f9b01" name="a27f54782b74dbce66e97202fe56f9b01"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DEFAULT_TCP_CONNECT_TIMEOUT</b>&#160;&#160;&#160;5</td></tr>
<tr class="separator:a27f54782b74dbce66e97202fe56f9b01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6201efd0f4145ec8a8324ac09c63cb7d" id="r_a6201efd0f4145ec8a8324ac09c63cb7d"><td class="memItemLeft" align="right" valign="top"><a id="a6201efd0f4145ec8a8324ac09c63cb7d" name="a6201efd0f4145ec8a8324ac09c63cb7d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SIZE_RANGE_BUFFER</b>&#160;&#160;&#160;50</td></tr>
<tr class="separator:a6201efd0f4145ec8a8324ac09c63cb7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a36c600c3cc2d05bdc30003c2a98ddabf" id="r_a36c600c3cc2d05bdc30003c2a98ddabf"><td class="memItemLeft" align="right" valign="top"><a id="a36c600c3cc2d05bdc30003c2a98ddabf" name="a36c600c3cc2d05bdc30003c2a98ddabf"></a>
typedef struct <a class="el" href="structHTTPCONNECTIONHANDLE.html">HTTPCONNECTIONHANDLE</a>&#160;</td><td class="memItemRight" valign="bottom"><b>http_connection_handle_t</b></td></tr>
<tr class="separator:a36c600c3cc2d05bdc30003c2a98ddabf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1e22cae555ed50c1a1c4416b3ff7579d" id="r_a1e22cae555ed50c1a1c4416b3ff7579d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1e22cae555ed50c1a1c4416b3ff7579d">Check_Connect_And_Wait_Connection</a> (<a class="el" href="group__Sock.html#ga8dc8083897335125630f1af5dafd5831">SOCKET</a> sock, int connect_res)</td></tr>
<tr class="memdesc:a1e22cae555ed50c1a1c4416b3ff7579d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks socket connection and wait if it is not connected. It should be called just after connect.  <br /></td></tr>
<tr class="separator:a1e22cae555ed50c1a1c4416b3ff7579d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a544174c65a193dc5a5802a41675f2742" id="r_a544174c65a193dc5a5802a41675f2742"><td class="memItemLeft" align="right" valign="top"><a id="a544174c65a193dc5a5802a41675f2742" name="a544174c65a193dc5a5802a41675f2742"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>private_connect</b> (<a class="el" href="group__Sock.html#ga8dc8083897335125630f1af5dafd5831">SOCKET</a> sockfd, const struct sockaddr *serv_addr, socklen_t addrlen)</td></tr>
<tr class="separator:a544174c65a193dc5a5802a41675f2742"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfdb2c20cbdb0eefd4f9d816e88d74c4" id="r_acfdb2c20cbdb0eefd4f9d816e88d74c4"><td class="memItemLeft" align="right" valign="top"><a id="acfdb2c20cbdb0eefd4f9d816e88d74c4" name="acfdb2c20cbdb0eefd4f9d816e88d74c4"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>get_hoststr</b> (const char *url_str, const char **hoststr, size_t *hostlen)</td></tr>
<tr class="separator:acfdb2c20cbdb0eefd4f9d816e88d74c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c11fb29999095b2f5da56b61e4fb91c" id="r_a4c11fb29999095b2f5da56b61e4fb91c"><td class="memItemLeft" align="right" valign="top"><a id="a4c11fb29999095b2f5da56b61e4fb91c" name="a4c11fb29999095b2f5da56b61e4fb91c"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>copy_msg_headers</b> (<a class="el" href="LinkedList_8h.html#a84d1191536c4004b2afefcfe4cd71062">LinkedList</a> *msgHeaders, <a class="el" href="group__UpnpString.html#gaeecf142f551b0bc6880a321f07ac381c">UpnpString</a> *headers)</td></tr>
<tr class="separator:a4c11fb29999095b2f5da56b61e4fb91c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a502852e9caf9d74374e83f8e9bf42acb" id="r_a502852e9caf9d74374e83f8e9bf42acb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a502852e9caf9d74374e83f8e9bf42acb">http_FixUrl</a> (<a class="el" href="uri_8h.html#a90949be5f73c7a2d831c0f6a653f55d8">uri_type</a> *url, <a class="el" href="uri_8h.html#a90949be5f73c7a2d831c0f6a653f55d8">uri_type</a> *fixed_url)</td></tr>
<tr class="memdesc:a502852e9caf9d74374e83f8e9bf42acb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validates URL.  <br /></td></tr>
<tr class="separator:a502852e9caf9d74374e83f8e9bf42acb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d33a2d2116d1de548e95d8d023548d9" id="r_a2d33a2d2116d1de548e95d8d023548d9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2d33a2d2116d1de548e95d8d023548d9">http_FixStrUrl</a> (const char *urlstr, size_t urlstrlen, <a class="el" href="uri_8h.html#a90949be5f73c7a2d831c0f6a653f55d8">uri_type</a> *fixed_url)</td></tr>
<tr class="memdesc:a2d33a2d2116d1de548e95d8d023548d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses URL and then validates URL.  <br /></td></tr>
<tr class="separator:a2d33a2d2116d1de548e95d8d023548d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34aecff8b81e210e4f045f4131b92d73" id="r_a34aecff8b81e210e4f045f4131b92d73"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Sock.html#ga8dc8083897335125630f1af5dafd5831">SOCKET</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a34aecff8b81e210e4f045f4131b92d73">http_Connect</a> (<a class="el" href="uri_8h.html#a90949be5f73c7a2d831c0f6a653f55d8">uri_type</a> *destination_url, <a class="el" href="uri_8h.html#a90949be5f73c7a2d831c0f6a653f55d8">uri_type</a> *url)</td></tr>
<tr class="memdesc:a34aecff8b81e210e4f045f4131b92d73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets destination address from URL and then connects to the remote end.  <br /></td></tr>
<tr class="separator:a34aecff8b81e210e4f045f4131b92d73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4f5f24f4aa10cc725b96ac5c29a88f7" id="r_ac4f5f24f4aa10cc725b96ac5c29a88f7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac4f5f24f4aa10cc725b96ac5c29a88f7">http_RecvMessage</a> (<a class="el" href="structSOCKINFO.html">SOCKINFO</a> *info, <a class="el" href="structhttp__parser__t.html">http_parser_t</a> *parser, http_method_t request_method, int *timeout_secs, int *http_error_code)</td></tr>
<tr class="memdesc:ac4f5f24f4aa10cc725b96ac5c29a88f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the data on the socket and take actions based on the read data to modify the parser objects buffer.  <br /></td></tr>
<tr class="separator:ac4f5f24f4aa10cc725b96ac5c29a88f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a333b21037bc6fd869e0b0b91cc073bbe" id="r_a333b21037bc6fd869e0b0b91cc073bbe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a333b21037bc6fd869e0b0b91cc073bbe">http_SendMessage</a> (<a class="el" href="structSOCKINFO.html">SOCKINFO</a> *info, int *TimeOut, const char *fmt,...)</td></tr>
<tr class="memdesc:a333b21037bc6fd869e0b0b91cc073bbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a message to the destination based on the format parameter.  <br /></td></tr>
<tr class="separator:a333b21037bc6fd869e0b0b91cc073bbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ef899831c9f04897982b56dfcbfff1a" id="r_a1ef899831c9f04897982b56dfcbfff1a"><td class="memItemLeft" align="right" valign="top"><a id="a1ef899831c9f04897982b56dfcbfff1a" name="a1ef899831c9f04897982b56dfcbfff1a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>http_RequestAndResponse</b> (<a class="el" href="uri_8h.html#a90949be5f73c7a2d831c0f6a653f55d8">uri_type</a> *destination, const char *request, size_t request_length, http_method_t req_method, int timeout_secs, <a class="el" href="structhttp__parser__t.html">http_parser_t</a> *response)</td></tr>
<tr class="separator:a1ef899831c9f04897982b56dfcbfff1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c4ffc89743a422ff2ad243e9ab14892" id="r_a4c4ffc89743a422ff2ad243e9ab14892"><td class="memItemLeft" align="right" valign="top"><a id="a4c4ffc89743a422ff2ad243e9ab14892" name="a4c4ffc89743a422ff2ad243e9ab14892"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>http_Download</b> (const char *url_str, int timeout_secs, char **document, size_t *doc_length, char *content_type)</td></tr>
<tr class="separator:a4c4ffc89743a422ff2ad243e9ab14892"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac84ac396977c96c88b14c5788c92a870" id="r_ac84ac396977c96c88b14c5788c92a870"><td class="memItemLeft" align="right" valign="top"><a id="ac84ac396977c96c88b14c5788c92a870" name="ac84ac396977c96c88b14c5788c92a870"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>MakeGenericMessage</b> (http_method_t method, const char *url_str, <a class="el" href="structmembuffer.html">membuffer</a> *request, <a class="el" href="uri_8h.html#a90949be5f73c7a2d831c0f6a653f55d8">uri_type</a> *url, int contentLength, const char *contentType, const <a class="el" href="group__UpnpString.html#gaeecf142f551b0bc6880a321f07ac381c">UpnpString</a> *headers)</td></tr>
<tr class="separator:ac84ac396977c96c88b14c5788c92a870"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7af01be59d73efff91c5216130845b00" id="r_a7af01be59d73efff91c5216130845b00"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7af01be59d73efff91c5216130845b00">ReadResponseLineAndHeaders</a> (<a class="el" href="structSOCKINFO.html">SOCKINFO</a> *info, <a class="el" href="structhttp__parser__t.html">http_parser_t</a> *parser, int *timeout_secs, int *http_error_code)</td></tr>
<tr class="memdesc:a7af01be59d73efff91c5216130845b00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses already exiting data. If not complete reads more data on the connected socket. The read data is then parsed. The same methid is carried out for headers.  <br /></td></tr>
<tr class="separator:a7af01be59d73efff91c5216130845b00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb7d22a386e10fd581c81eadc29249fe" id="r_acb7d22a386e10fd581c81eadc29249fe"><td class="memItemLeft" align="right" valign="top"><a id="acb7d22a386e10fd581c81eadc29249fe" name="acb7d22a386e10fd581c81eadc29249fe"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>http_HttpGetProgress</b> (void *Handle, size_t *length, size_t *total)</td></tr>
<tr class="separator:acb7d22a386e10fd581c81eadc29249fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51ec46d88b9514d6082c993ee7b9ccb0" id="r_a51ec46d88b9514d6082c993ee7b9ccb0"><td class="memItemLeft" align="right" valign="top"><a id="a51ec46d88b9514d6082c993ee7b9ccb0" name="a51ec46d88b9514d6082c993ee7b9ccb0"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>http_CancelHttpGet</b> (void *Handle)</td></tr>
<tr class="separator:a51ec46d88b9514d6082c993ee7b9ccb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17d0de5cdf2e5047f8c549f745c5d965" id="r_a17d0de5cdf2e5047f8c549f745c5d965"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a17d0de5cdf2e5047f8c549f745c5d965">http_OpenHttpConnection</a> (const char *url_str, void **Handle, int timeout)</td></tr>
<tr class="memdesc:a17d0de5cdf2e5047f8c549f745c5d965"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens a connection to the server.  <br /></td></tr>
<tr class="separator:a17d0de5cdf2e5047f8c549f745c5d965"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8610e8aea3346f682ca91fe37b21bf8" id="r_ab8610e8aea3346f682ca91fe37b21bf8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab8610e8aea3346f682ca91fe37b21bf8">http_MakeHttpRequest</a> (Upnp_HttpMethod method, const char *url_str, void *Handle, <a class="el" href="group__UpnpString.html#gaeecf142f551b0bc6880a321f07ac381c">UpnpString</a> *headers, const char *contentType, int contentLength, int timeout)</td></tr>
<tr class="memdesc:ab8610e8aea3346f682ca91fe37b21bf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes a HTTP request using a connection previously created by <b>UpnpOpenHttpConnection</b>.  <br /></td></tr>
<tr class="separator:ab8610e8aea3346f682ca91fe37b21bf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55e7bd2e48918bcaf6b101f174e0b355" id="r_a55e7bd2e48918bcaf6b101f174e0b355"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a55e7bd2e48918bcaf6b101f174e0b355">http_WriteHttpRequest</a> (void *Handle, char *buf, size_t *size, int timeout)</td></tr>
<tr class="memdesc:a55e7bd2e48918bcaf6b101f174e0b355"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the content of a HTTP request initiated by a <b>UpnpMakeHttpRequest</b> call. The end of the content should be indicated by a call to <b>UpnpEndHttpRequest</b>.  <br /></td></tr>
<tr class="separator:a55e7bd2e48918bcaf6b101f174e0b355"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7da45a1ca164b06f2f3e971f89c9fa54" id="r_a7da45a1ca164b06f2f3e971f89c9fa54"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7da45a1ca164b06f2f3e971f89c9fa54">http_EndHttpRequest</a> (void *Handle, int timeout)</td></tr>
<tr class="memdesc:a7da45a1ca164b06f2f3e971f89c9fa54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates the end of a HTTP request previously made by <b>UpnpMakeHttpRequest</b>.  <br /></td></tr>
<tr class="separator:a7da45a1ca164b06f2f3e971f89c9fa54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8095d987290dfdc4f151dc8e3d7c40f" id="r_ab8095d987290dfdc4f151dc8e3d7c40f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab8095d987290dfdc4f151dc8e3d7c40f">http_GetHttpResponse</a> (void *Handle, <a class="el" href="group__UpnpString.html#gaeecf142f551b0bc6880a321f07ac381c">UpnpString</a> *headers, char **contentType, int *contentLength, int *httpStatus, int timeout)</td></tr>
<tr class="memdesc:ab8095d987290dfdc4f151dc8e3d7c40f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the response from the server using a connection previously created by <b>UpnpOpenHttpConnection</b>.  <br /></td></tr>
<tr class="separator:ab8095d987290dfdc4f151dc8e3d7c40f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12907b819d45e67ef4d49600e80dfd7e" id="r_a12907b819d45e67ef4d49600e80dfd7e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a12907b819d45e67ef4d49600e80dfd7e">http_ReadHttpResponse</a> (void *Handle, char *buf, size_t *size, int timeout)</td></tr>
<tr class="memdesc:a12907b819d45e67ef4d49600e80dfd7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the content of a response using a connection previously created by <b>UpnpOpenHttpConnection</b>.  <br /></td></tr>
<tr class="separator:a12907b819d45e67ef4d49600e80dfd7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23dee83362f8bda1551e1514e806d6bf" id="r_a23dee83362f8bda1551e1514e806d6bf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a23dee83362f8bda1551e1514e806d6bf">http_CloseHttpConnection</a> (void *Handle)</td></tr>
<tr class="memdesc:a23dee83362f8bda1551e1514e806d6bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the connection created with <b>UpnpOpenHttpConnection</b> and frees any memory associated with the connection.  <br /></td></tr>
<tr class="separator:a23dee83362f8bda1551e1514e806d6bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a992c9ac44a3720d238e012d0fe0a0707" id="r_a992c9ac44a3720d238e012d0fe0a0707"><td class="memItemLeft" align="right" valign="top"><a id="a992c9ac44a3720d238e012d0fe0a0707" name="a992c9ac44a3720d238e012d0fe0a0707"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>http_SendStatusResponse</b> (<a class="el" href="structSOCKINFO.html">SOCKINFO</a> *info, int http_status_code, int request_major_version, int request_minor_version)</td></tr>
<tr class="separator:a992c9ac44a3720d238e012d0fe0a0707"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5981cc2f7cc76c3e6b6700c5f27c472" id="r_af5981cc2f7cc76c3e6b6700c5f27c472"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af5981cc2f7cc76c3e6b6700c5f27c472">http_MakeMessage</a> (<a class="el" href="structmembuffer.html">membuffer</a> *buf, int http_major_version, int http_minor_version, const char *fmt,...)</td></tr>
<tr class="memdesc:af5981cc2f7cc76c3e6b6700c5f27c472"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate an HTTP message based on the format that is specified in the input parameters.  <br /></td></tr>
<tr class="separator:af5981cc2f7cc76c3e6b6700c5f27c472"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d87c4e85f958f11c3009471743d4a4e" id="r_a5d87c4e85f958f11c3009471743d4a4e"><td class="memItemLeft" align="right" valign="top"><a id="a5d87c4e85f958f11c3009471743d4a4e" name="a5d87c4e85f958f11c3009471743d4a4e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>http_CalcResponseVersion</b> (int request_major_vers, int request_minor_vers, int *response_major_vers, int *response_minor_vers)</td></tr>
<tr class="separator:a5d87c4e85f958f11c3009471743d4a4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77bd8588115da8c6ad6d715292eecf8e" id="r_a77bd8588115da8c6ad6d715292eecf8e"><td class="memItemLeft" align="right" valign="top"><a id="a77bd8588115da8c6ad6d715292eecf8e" name="a77bd8588115da8c6ad6d715292eecf8e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>MakeGetMessageEx</b> (const char *url_str, <a class="el" href="structmembuffer.html">membuffer</a> *request, <a class="el" href="uri_8h.html#a90949be5f73c7a2d831c0f6a653f55d8">uri_type</a> *url, struct <a class="el" href="structSendInstruction.html">SendInstruction</a> *pRangeSpecifier)</td></tr>
<tr class="separator:a77bd8588115da8c6ad6d715292eecf8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6e8ca5e4a342e562769c5670475fe3f" id="r_aa6e8ca5e4a342e562769c5670475fe3f"><td class="memItemLeft" align="right" valign="top"><a id="aa6e8ca5e4a342e562769c5670475fe3f" name="aa6e8ca5e4a342e562769c5670475fe3f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>http_OpenHttpGetEx</b> (const char *url_str, void **Handle, char **contentType, int *contentLength, int *httpStatus, int lowRange, int highRange, int timeout)</td></tr>
<tr class="separator:aa6e8ca5e4a342e562769c5670475fe3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c469cd11deee69c1f1d9ec77de66df9" id="r_a4c469cd11deee69c1f1d9ec77de66df9"><td class="memItemLeft" align="right" valign="top"><a id="a4c469cd11deee69c1f1d9ec77de66df9" name="a4c469cd11deee69c1f1d9ec77de66df9"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>get_sdk_info</b> (char *info, size_t infoSize)</td></tr>
<tr class="separator:a4c469cd11deee69c1f1d9ec77de66df9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Purpose: This file defines the functionality making use of the http. It defines functions to receive messages, process messages, send messages. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a1e22cae555ed50c1a1c4416b3ff7579d" name="a1e22cae555ed50c1a1c4416b3ff7579d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e22cae555ed50c1a1c4416b3ff7579d">&#9670;&#160;</a></span>Check_Connect_And_Wait_Connection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int Check_Connect_And_Wait_Connection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__Sock.html#ga8dc8083897335125630f1af5dafd5831">SOCKET</a></td>          <td class="paramname"><span class="paramname"><em>sock</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>connect_res</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks socket connection and wait if it is not connected. It should be called just after connect. </p>
<dl class="section return"><dt>Returns</dt><dd>0 if successful, else -1. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sock</td><td>socket.  </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">connect_res</td><td>result of connect. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="structmembuffer.html#ac4c59c595502b1075ac517d9ea7b4743">membuffer::buf</a>, <a class="el" href="structmemptr.html#ae3089c9df96fc059185fec2d6bed61aa">memptr::buf</a>, <a class="el" href="#a1e22cae555ed50c1a1c4416b3ff7579d">Check_Connect_And_Wait_Connection()</a>, <a class="el" href="structmembuffer.html#a44f3b6407c4490964fbb7f831b55e996">membuffer::length</a>, <a class="el" href="structmemptr.html#acaa22842001c377190f4dba6d54430ff">memptr::length</a>, <a class="el" href="structhttp__header__t.html#a39ccc6b29221ffaf48476329eb43b00c">http_header_t::name</a>, <a class="el" href="group__Sock.html#gaa79beea18200857befa07e4ce5ead9d8">sock_make_blocking()</a>, <a class="el" href="group__Sock.html#gae6a70932227821d139090cdd29cfde37">sock_make_no_blocking()</a>, <a class="el" href="group__UPnPAPI.html#ga927ec0930b75494259cad31dda8e3d7b">UPNP_E_INVALID_URL</a>, <a class="el" href="group__UPnPAPI.html#ga8496dde0ca68f0cd92b58db8563b73b7">UPNP_E_SUCCESS</a>, and <a class="el" href="structhttp__header__t.html#a6a05e8e1ea8ad4f889d635b469dc53ee">http_header_t::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="#a1e22cae555ed50c1a1c4416b3ff7579d">Check_Connect_And_Wait_Connection()</a>.</p>

</div>
</div>
<a id="a23dee83362f8bda1551e1514e806d6bf" name="a23dee83362f8bda1551e1514e806d6bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23dee83362f8bda1551e1514e806d6bf">&#9670;&#160;</a></span>http_CloseHttpConnection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int http_CloseHttpConnection </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>handle</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes the connection created with <b>UpnpOpenHttpConnection</b> and frees any memory associated with the connection. </p>
<dl class="section return"><dt>Returns</dt><dd>An integer representing one of the following: <ul>
<li><code>UPNP_E_SUCCESS:</code> The operation completed successfully. </li>
<li><code>UPNP_E_INVALID_PARAM:</code> <b>handle</b>, or is not a valid pointer. </li>
<li><code>UPNP_E_SOCKET_READ:</code> An error or timeout occurred reading from a socket. </li>
<li><code>UPNP_E_OUTOF_SOCKET:</code> Too many sockets are currently allocated. </li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">Handle</td><td>The handle of the connection to close, created by the call to <b>UpnpOpenHttpPost</b>. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="group__Sock.html#ga614eac9715a4fe54cac784a860d29320">sock_destroy()</a>, <a class="el" href="group__UPnPAPI.html#gae3d1f52861b4d2afed68c7d46aad55c4">UPNP_E_INVALID_PARAM</a>, and <a class="el" href="group__UPnPAPI.html#ga8496dde0ca68f0cd92b58db8563b73b7">UPNP_E_SUCCESS</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__UPnPAPI.html#ga865d9b116a6028d1fd1f1ad2377dca35">UpnpCloseHttpConnection()</a>, and <a class="el" href="group__UPnPAPI.html#ga32b6a961a76abcb37fcd7f6e3de10ee7">UpnpCloseHttpPost()</a>.</p>

</div>
</div>
<a id="a34aecff8b81e210e4f045f4131b92d73" name="a34aecff8b81e210e4f045f4131b92d73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34aecff8b81e210e4f045f4131b92d73">&#9670;&#160;</a></span>http_Connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Sock.html#ga8dc8083897335125630f1af5dafd5831">SOCKET</a> http_Connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uri_8h.html#a90949be5f73c7a2d831c0f6a653f55d8">uri_type</a> *</td>          <td class="paramname"><span class="paramname"><em>destination_url</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uri_8h.html#a90949be5f73c7a2d831c0f6a653f55d8">uri_type</a> *</td>          <td class="paramname"><span class="paramname"><em>url</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets destination address from URL and then connects to the remote end. </p>
<dl class="section return"><dt>Returns</dt><dd>Socket descriptor on success, or on error: <ul>
<li><code>UPNP_E_OUTOF_SOCKET</code> </li>
<li><code>UPNP_E_SOCKET_CONNECT</code> </li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">destination_url</td><td>URL containing destination information.  </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">url</td><td>Fixed and corrected URL. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="#a502852e9caf9d74374e83f8e9bf42acb">http_FixUrl()</a>, <a class="el" href="group__Sock.html#ga26769957ec1a2beaf223f33b66ee64ab">INVALID_SOCKET</a>, <a class="el" href="group__UPnPAPI.html#ga8e8c5cd013dde8ab5003c9123dac7fd6">UPNP_E_OUTOF_SOCKET</a>, <a class="el" href="group__UPnPAPI.html#ga01908abe1b6ae0541eaa18ef67550432">UPNP_E_SOCKET_CONNECT</a>, <a class="el" href="group__Sock.html#ga01406117685a1ebddd5c2d2b14d2b71b">UpnpCloseSocket</a>, and <a class="el" href="upnpdebug_8h.html#afe489651d95ecf91dd452cdb2d5497c3">UpnpPrintf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="gena__device_8c.html#ace7f60ea1b593eaa2396d1b6bb717a89">notify_send_and_recv()</a>.</p>

</div>
</div>
<a id="a7da45a1ca164b06f2f3e971f89c9fa54" name="a7da45a1ca164b06f2f3e971f89c9fa54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7da45a1ca164b06f2f3e971f89c9fa54">&#9670;&#160;</a></span>http_EndHttpRequest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int http_EndHttpRequest </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>handle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>timeout</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicates the end of a HTTP request previously made by <b>UpnpMakeHttpRequest</b>. </p>
<dl class="section return"><dt>Returns</dt><dd>An integer representing one of the following: <ul>
<li><code>UPNP_E_SUCCESS:</code> The operation completed successfully. </li>
<li><code>UPNP_E_INVALID_PARAM:</code> <b>handle</b> is not a valid pointer. </li>
<li><code>UPNP_E_OUTOF_MEMORY:</code> Insufficient resources exist to download this file. </li>
<li><code>UPNP_E_SOCKET_ERROR:</code> Error occured allocating a socket and resources or an error occurred binding a socket. </li>
<li><code>UPNP_E_SOCKET_WRITE:</code> An error or timeout occurred writing to a socket. </li>
<li><code>UPNP_E_SOCKET_CONNECT:</code> An error occurred connecting a socket. </li>
<li><code>UPNP_E_OUTOF_SOCKET:</code> Too many sockets are currently allocated. </li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">Handle</td><td>The handle to the connection.  </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>The time out value sent with the request during which a response is expected from the receiver, failing which, an error is reported. If value is negative, timeout is infinite. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="group__Sock.html#ga243a86adfc50dd8ce81c1b5cc64f96f1">sock_write()</a>, <a class="el" href="group__UPnPAPI.html#gae3d1f52861b4d2afed68c7d46aad55c4">UPNP_E_INVALID_PARAM</a>, <a class="el" href="group__UPnPAPI.html#ga94e0d695a82b970665dd6c7bfa90b4c3">UPNP_E_SOCKET_WRITE</a>, and <a class="el" href="group__UPnPAPI.html#ga8496dde0ca68f0cd92b58db8563b73b7">UPNP_E_SUCCESS</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__UPnPAPI.html#ga32b6a961a76abcb37fcd7f6e3de10ee7">UpnpCloseHttpPost()</a>, and <a class="el" href="group__UPnPAPI.html#gabf7220a78d77e61b8d3bcc3165cfa71b">UpnpEndHttpRequest()</a>.</p>

</div>
</div>
<a id="a2d33a2d2116d1de548e95d8d023548d9" name="a2d33a2d2116d1de548e95d8d023548d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d33a2d2116d1de548e95d8d023548d9">&#9670;&#160;</a></span>http_FixStrUrl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int http_FixStrUrl </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>urlstr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>urlstrlen</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uri_8h.html#a90949be5f73c7a2d831c0f6a653f55d8">uri_type</a> *</td>          <td class="paramname"><span class="paramname"><em>fixed_url</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses URL and then validates URL. </p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><code>UPNP_E_INVALID_URL</code> </li>
<li><code>UPNP_E_SUCCESS</code> </li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">urlstr</td><td>Character string as a URL.  </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">urlstrlen</td><td>Length of the character string.  </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">fixed_url</td><td>Fixed and corrected URL. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="#a502852e9caf9d74374e83f8e9bf42acb">http_FixUrl()</a>, <a class="el" href="uri_8c.html#ae59095a3e023c16f4dd68bc60e21f7c7">parse_uri()</a>, and <a class="el" href="group__UPnPAPI.html#ga927ec0930b75494259cad31dda8e3d7b">UPNP_E_INVALID_URL</a>.</p>

<p class="reference">Referenced by <a class="el" href="gena__ctrlpt_8c.html#af948de1f7e6388cea8bb13fccd2cd7f0">gena_subscribe()</a>, <a class="el" href="gena__ctrlpt_8c.html#a2de7da6d72334855af6ddc003cc2b181">gena_unsubscribe()</a>, and <a class="el" href="#a17d0de5cdf2e5047f8c549f745c5d965">http_OpenHttpConnection()</a>.</p>

</div>
</div>
<a id="a502852e9caf9d74374e83f8e9bf42acb" name="a502852e9caf9d74374e83f8e9bf42acb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a502852e9caf9d74374e83f8e9bf42acb">&#9670;&#160;</a></span>http_FixUrl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int http_FixUrl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uri_8h.html#a90949be5f73c7a2d831c0f6a653f55d8">uri_type</a> *</td>          <td class="paramname"><span class="paramname"><em>url</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uri_8h.html#a90949be5f73c7a2d831c0f6a653f55d8">uri_type</a> *</td>          <td class="paramname"><span class="paramname"><em>fixed_url</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Validates URL. </p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><code>UPNP_E_INVALID_URL</code> </li>
<li><code>UPNP_E_SUCCESS</code> </li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">url</td><td>URL to be validated and fixed.  </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">fixed_url</td><td>URL after being fixed. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="structHOSTPORT.html#a0f1ab51b911fb2bf4e6ab546dc8b7f4b">HOSTPORT::text</a>, <a class="el" href="uri_8c.html#a8f32e8ba916b944b37e9f23e1fc60ec9">token_string_casecmp()</a>, <a class="el" href="group__UPnPAPI.html#ga927ec0930b75494259cad31dda8e3d7b">UPNP_E_INVALID_URL</a>, and <a class="el" href="group__UPnPAPI.html#ga8496dde0ca68f0cd92b58db8563b73b7">UPNP_E_SUCCESS</a>.</p>

<p class="reference">Referenced by <a class="el" href="#a34aecff8b81e210e4f045f4131b92d73">http_Connect()</a>, <a class="el" href="#a2d33a2d2116d1de548e95d8d023548d9">http_FixStrUrl()</a>, and <a class="el" href="#af5981cc2f7cc76c3e6b6700c5f27c472">http_MakeMessage()</a>.</p>

</div>
</div>
<a id="ab8095d987290dfdc4f151dc8e3d7c40f" name="ab8095d987290dfdc4f151dc8e3d7c40f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8095d987290dfdc4f151dc8e3d7c40f">&#9670;&#160;</a></span>http_GetHttpResponse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int http_GetHttpResponse </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>handle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__UpnpString.html#gaeecf142f551b0bc6880a321f07ac381c">UpnpString</a> *</td>          <td class="paramname"><span class="paramname"><em>headers</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **</td>          <td class="paramname"><span class="paramname"><em>contentType</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>contentLength</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>httpStatus</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>timeout</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the response from the server using a connection previously created by <b>UpnpOpenHttpConnection</b>. </p>
<dl class="section note"><dt>Note</dt><dd>Memory for <b>contentType</b> is only valid until the next call to the HTTP API for the same connection.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>An integer representing one of the following: <ul>
<li><code>UPNP_E_SUCCESS:</code> The operation completed successfully. </li>
<li><code>UPNP_E_INVALID_PARAM:</code> Either <b>handle</b>, <b>contentType</b>, <b>contentLength</b> or <b>httpStatus</b> is not a valid pointer. </li>
<li><code>UPNP_E_INVALID_URL:</code> The <b>url</b> is not a valid URL. </li>
<li><code>UPNP_E_OUTOF_MEMORY:</code> Insufficient resources exist to download this file. </li>
<li><code>UPNP_E_NETWORK_ERROR:</code> A network error occurred. </li>
<li><code>UPNP_E_SOCKET_WRITE:</code> An error or timeout occurred writing to a socket. </li>
<li><code>UPNP_E_SOCKET_READ:</code> An error or timeout occurred reading from a socket. </li>
<li><code>UPNP_E_SOCKET_BIND:</code> An error occurred binding a socket. </li>
<li><code>UPNP_E_SOCKET_CONNECT:</code> An error occurred connecting a socket. </li>
<li><code>UPNP_E_OUTOF_SOCKET:</code> Too many sockets are currently allocated. </li>
<li><code>UPNP_E_BAD_RESPONSE:</code> A bad response was received from the remote server. </li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">Handle</td><td>The handle of the connection created by the call to <b>UpnpOpenHttpConnection</b>.  </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">headers</td><td>Headers sent by the server for the response. If NULL then the headers are not copied.  </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">contentType</td><td>A buffer to store the media type of the item.  </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">contentLength</td><td>A pointer to store the length of the item.  </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">httpStatus</td><td>The status returned on receiving a response message.  </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>The time out value sent with the request during which a response is expected from the server, failing which, an error is reported back to the user. If value is negative, timeout is infinite. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="structmemptr.html#ae3089c9df96fc059185fec2d6bed61aa">memptr::buf</a>, <a class="el" href="structhttp__message__t.html#ad25a924f2f27dc1000fc080fe408a0c1">http_message_t::headers</a>, <a class="el" href="httpparser_8h.html#aaec739c6f0ff93b139062af2ba4b0f1dafa49a399f330e793f8b8d6a7c5a05bec">PARSE_CONTINUE_1</a>, <a class="el" href="httpparser_8h.html#aaec739c6f0ff93b139062af2ba4b0f1dac6100102562753aa9aa43bd7885baa6e">PARSE_OK</a>, <a class="el" href="httpparser_8h.html#aaec739c6f0ff93b139062af2ba4b0f1da9674022bcca440239f8c53bcbd4101a0">PARSE_SUCCESS</a>, <a class="el" href="#a7af01be59d73efff91c5216130845b00">ReadResponseLineAndHeaders()</a>, <a class="el" href="structhttp__message__t.html#a6e533777011a4bd0c5bbdc9c303f04f6">http_message_t::status_code</a>, <a class="el" href="group__UPnPAPI.html#gae84ce9bbb89ebe4a170956bc785fffba">UPNP_E_BAD_RESPONSE</a>, and <a class="el" href="group__UPnPAPI.html#ga8496dde0ca68f0cd92b58db8563b73b7">UPNP_E_SUCCESS</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__UPnPAPI.html#ga32b6a961a76abcb37fcd7f6e3de10ee7">UpnpCloseHttpPost()</a>, and <a class="el" href="group__UPnPAPI.html#gafca845cb73300ed7cbd96849c9ae137c">UpnpGetHttpResponse()</a>.</p>

</div>
</div>
<a id="ab8610e8aea3346f682ca91fe37b21bf8" name="ab8610e8aea3346f682ca91fe37b21bf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8610e8aea3346f682ca91fe37b21bf8">&#9670;&#160;</a></span>http_MakeHttpRequest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int http_MakeHttpRequest </td>
          <td>(</td>
          <td class="paramtype">Upnp_HttpMethod</td>          <td class="paramname"><span class="paramname"><em>method</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>url</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>handle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__UpnpString.html#gaeecf142f551b0bc6880a321f07ac381c">UpnpString</a> *</td>          <td class="paramname"><span class="paramname"><em>headers</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>contentType</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>contentLength</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>timeout</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Makes a HTTP request using a connection previously created by <b>UpnpOpenHttpConnection</b>. </p>
<dl class="section note"><dt>Note</dt><dd>Trying to make another request while a request is already being processed results in undefined behavior. It's up to the user to end a previous request by calling <b>UpnpEndHttpRequest</b>.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>An integer representing one of the following: <ul>
<li><code>UPNP_E_SUCCESS:</code> The operation completed successfully. </li>
<li><code>UPNP_E_INVALID_PARAM:</code> Either <b>url</b>, <b>handle</b> or <b>contentType</b> is not a valid pointer. </li>
<li><code>UPNP_E_INVALID_URL:</code> The <b>url</b> is not a valid URL. </li>
<li><code>UPNP_E_OUTOF_MEMORY:</code> Insufficient resources exist to download this file. </li>
<li><code>UPNP_E_SOCKET_ERROR:</code> Error occured allocating a socket and resources or an error occurred binding a socket. </li>
<li><code>UPNP_E_SOCKET_WRITE:</code> An error or timeout occurred writing to a socket. </li>
<li><code>UPNP_E_SOCKET_CONNECT:</code> An error occurred connecting a socket. </li>
<li><code>UPNP_E_OUTOF_SOCKET:</code> Too many sockets are currently allocated. </li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">url_str</td><td>The URL to use to make the request. The URL should use the same host and scheme used to create the connection.  </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Handle</td><td>The handle to the connection.  </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">headers</td><td>Headers to be used for the request. Each header should be terminated by a CRLF as specified in the HTTP specification. If NULL then the default headers will be used.  </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">contentType</td><td>The media type of content being sent. Can be NULL.  </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">contentLength</td><td>The length of the content being sent, in bytes. Set to <b>UPNP_USING_CHUNKED</b> to use chunked encoding, or <b>UPNP_UNTIL_CLOSE</b> to avoid specifying the content length to the server. In this case the request is considered unfinished until the connection is closed.  </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>The time out value sent with the request during which a response is expected from the receiver, failing which, an error is reported. If value is negative, timeout is infinite. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="structmembuffer.html#ac4c59c595502b1075ac517d9ea7b4743">membuffer::buf</a>, <a class="el" href="#a333b21037bc6fd869e0b0b91cc073bbe">http_SendMessage()</a>, <a class="el" href="structmembuffer.html#a44f3b6407c4490964fbb7f831b55e996">membuffer::length</a>, <a class="el" href="group__UPnPAPI.html#gae3d1f52861b4d2afed68c7d46aad55c4">UPNP_E_INVALID_PARAM</a>, and <a class="el" href="group__UPnPAPI.html#ga8496dde0ca68f0cd92b58db8563b73b7">UPNP_E_SUCCESS</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__UPnPAPI.html#ga534218b5a1c6cdcc1094a58449019882">UpnpMakeHttpRequest()</a>, and <a class="el" href="group__UPnPAPI.html#ga45850f990fe110e26f9b093a88e3e8a0">UpnpOpenHttpPost()</a>.</p>

</div>
</div>
<a id="af5981cc2f7cc76c3e6b6700c5f27c472" name="af5981cc2f7cc76c3e6b6700c5f27c472"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5981cc2f7cc76c3e6b6700c5f27c472">&#9670;&#160;</a></span>http_MakeMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int http_MakeMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmembuffer.html">membuffer</a> *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>http_major_version</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>http_minor_version</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>fmt</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>...</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate an HTTP message based on the format that is specified in the input parameters. </p>
<pre class="fragment">Format types:
        'B':    arg = int status_code           -- appends content-length,
content-type and HTML body for given code. 'b': arg1 = const char *buf; arg2 =
size_t buf_length memory ptr
        'C':    (no args)                       -- appends a HTTP CONNECTION:
close header depending on major, minor version. 'c':    (no args)
-- appends CRLF "\r\n"
        'D':    (no args)                       -- appends HTTP DATE: header
        'd':    arg = int number                -- appends decimal number
        'G':    arg = range information         -- add range header
        'h':    arg = off_t number              -- appends off_t number
        'K':    (no args)                       -- add chunky header
        'L':    arg = language information      -- add Content-Language header
if Accept-Language header is not empty and if WEB_SERVER_CONTENT_LANGUAGE is not
empty 'N':      arg1 = off_t content_length     -- content-length header 'q':
arg1 = http_method_t            -- request start line and HOST header arg2 =
(uri_type *) 'Q':       arg1 = http_method_t;           -- start line of request
                arg2 = char* url;
                arg3 = size_t url_length
        'R':    arg = int status_code           -- adds a response start line
        'S':    (no args)                       -- appends HTTP SERVER: header
        's':    arg = const char *              -- C_string
        'T':    arg = char * content_type;      -- format e.g: "text/html";
content-type header
        't':    arg = time_t * gmt_time         -- appends time in RFC 1123 fmt
        'U':    (no args)                       -- appends HTTP USER-AGENT:
header
        'X':    arg = const char *              -- useragent; "redsonic" HTTP
X-User-Agent: useragent </pre><dl class="section return"><dt>Returns</dt><dd><ul>
<li><code>0</code> - On Success </li>
<li><code>UPNP_E_OUTOF_MEMORY</code> </li>
<li><code>UPNP_E_INVALID_URL</code> </li>
</ul>
</dd></dl>

<p class="reference">References <a class="el" href="group__XMLAPI.html#ga4d657664f7d193b40a875c8919c54d41">DOMString</a>, <a class="el" href="#a502852e9caf9d74374e83f8e9bf42acb">http_FixUrl()</a>, <a class="el" href="#af5981cc2f7cc76c3e6b6700c5f27c472">http_MakeMessage()</a>, <a class="el" href="structHOSTPORT.html#a0f1ab51b911fb2bf4e6ab546dc8b7f4b">HOSTPORT::text</a>, <a class="el" href="group__UPnPAPI.html#ga927ec0930b75494259cad31dda8e3d7b">UPNP_E_INVALID_URL</a>, <a class="el" href="group__UPnPAPI.html#ga90d131a9be6dbaa4a41645b148941fd0">UPNP_E_OUTOF_MEMORY</a>, <a class="el" href="UpnpExtraHeaders_8h.html#a786a0c272065b81af91b9f4ea969eadf">UpnpExtraHeaders_get_resp()</a>, and <a class="el" href="upnpdebug_8h.html#afe489651d95ecf91dd452cdb2d5497c3">UpnpPrintf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__SSDPlib.html#ga3a329b638b292c33467568d19671174e">CreateServicePacket()</a>, <a class="el" href="gena__ctrlpt_8c.html#af948de1f7e6388cea8bb13fccd2cd7f0">gena_subscribe()</a>, <a class="el" href="gena__ctrlpt_8c.html#a2de7da6d72334855af6ddc003cc2b181">gena_unsubscribe()</a>, <a class="el" href="gena__device_8c.html#ae50b8ec11f841c2740d7e343668a7644">genaNotify()</a>, <a class="el" href="#af5981cc2f7cc76c3e6b6700c5f27c472">http_MakeMessage()</a>, <a class="el" href="gena__device_8c.html#ace7f60ea1b593eaa2396d1b6bb717a89">notify_send_and_recv()</a>, <a class="el" href="webserver_8c.html#ae77c3477be2c345c63540e6a1529e290">process_request()</a>, <a class="el" href="gena__device_8c.html#aea18ab9fac53047c7e10fe1f1a37db4a">respond_ok()</a>, <a class="el" href="soap__device_8c.html#a0da1c88edfef970890883f372e4c8b67">send_action_response()</a>, <a class="el" href="soap__device_8c.html#a6b79c8004c0d263284ab7279205c142c">send_error_response()</a>, <a class="el" href="soap__device_8c.html#ab750e76d3a100306fecaed69238c0df6">send_var_query_response()</a>, and <a class="el" href="webserver_8c.html#abb77fc2cfdf0dfbd97e5b3880c4b18d1">web_server_callback()</a>.</p>

</div>
</div>
<a id="a17d0de5cdf2e5047f8c549f745c5d965" name="a17d0de5cdf2e5047f8c549f745c5d965"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17d0de5cdf2e5047f8c549f745c5d965">&#9670;&#160;</a></span>http_OpenHttpConnection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int http_OpenHttpConnection </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>url</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **</td>          <td class="paramname"><span class="paramname"><em>handle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>timeout</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens a connection to the server. </p>
<p>The SDK allocates the memory for <b>handle</b>, the application is responsible for freeing this memory.</p>
<dl class="section return"><dt>Returns</dt><dd>An integer representing one of the following: <ul>
<li><code>UPNP_E_SUCCESS:</code> The operation completed successfully. </li>
<li><code>UPNP_E_INVALID_PARAM:</code> Either <b>url</b>, or <b>handle</b> is not a valid pointer. </li>
<li><code>UPNP_E_INVALID_URL:</code> The <b>url</b> is not a valid URL. </li>
<li><code>UPNP_E_OUTOF_MEMORY:</code> Insufficient resources exist to download this file. </li>
<li><code>UPNP_E_SOCKET_ERROR:</code> Error occured allocating a socket and resources or an error occurred binding a socket. </li>
<li><code>UPNP_E_SOCKET_WRITE:</code> An error or timeout occurred writing to a socket. </li>
<li><code>UPNP_E_SOCKET_CONNECT:</code> An error occurred connecting a socket. </li>
<li><code>UPNP_E_OUTOF_SOCKET:</code> Too many sockets are currently allocated. </li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">url_str</td><td>The URL which contains the host, and the scheme to make the connection.  </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">Handle</td><td>[in,out] A pointer in which to store the handle for this connection. This handle is required for futher operations over this connection.  </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>The time out value sent with the request during which a response is expected from the receiver, failing which, an error is reported. If value is negative, timeout is infinite. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="#a2d33a2d2116d1de548e95d8d023548d9">http_FixStrUrl()</a>, <a class="el" href="group__Sock.html#ga26769957ec1a2beaf223f33b66ee64ab">INVALID_SOCKET</a>, <a class="el" href="group__Sock.html#ga614eac9715a4fe54cac784a860d29320">sock_destroy()</a>, <a class="el" href="group__Sock.html#ga4ffa621a83115b3b714a75a2e37d0489">sock_init()</a>, <a class="el" href="uri_8c.html#a8f32e8ba916b944b37e9f23e1fc60ec9">token_string_casecmp()</a>, <a class="el" href="group__UPnPAPI.html#gae3d1f52861b4d2afed68c7d46aad55c4">UPNP_E_INVALID_PARAM</a>, <a class="el" href="group__UPnPAPI.html#ga90d131a9be6dbaa4a41645b148941fd0">UPNP_E_OUTOF_MEMORY</a>, <a class="el" href="group__UPnPAPI.html#ga01908abe1b6ae0541eaa18ef67550432">UPNP_E_SOCKET_CONNECT</a>, <a class="el" href="group__UPnPAPI.html#ga13ac42d849e2add5f1a86cb6b5fee7ed">UPNP_E_SOCKET_ERROR</a>, and <a class="el" href="group__UPnPAPI.html#ga8496dde0ca68f0cd92b58db8563b73b7">UPNP_E_SUCCESS</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__UPnPAPI.html#gaf28645a07fa4c84254776136a8050db6">UpnpOpenHttpConnection()</a>, and <a class="el" href="group__UPnPAPI.html#ga45850f990fe110e26f9b093a88e3e8a0">UpnpOpenHttpPost()</a>.</p>

</div>
</div>
<a id="a12907b819d45e67ef4d49600e80dfd7e" name="a12907b819d45e67ef4d49600e80dfd7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12907b819d45e67ef4d49600e80dfd7e">&#9670;&#160;</a></span>http_ReadHttpResponse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int http_ReadHttpResponse </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>handle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *</td>          <td class="paramname"><span class="paramname"><em>size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>timeout</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the content of a response using a connection previously created by <b>UpnpOpenHttpConnection</b>. </p>
<dl class="section return"><dt>Returns</dt><dd>An integer representing one of the following: <ul>
<li><code>UPNP_E_SUCCESS:</code> The operation completed successfully. </li>
<li><code>UPNP_E_INVALID_PARAM:</code> Either <b>handle</b>, <b>buf</b> or <b>size</b> is not a valid pointer. </li>
<li><code>UPNP_E_BAD_RESPONSE:</code> A bad response was received from the remote server. </li>
<li><code>UPNP_E_BAD_HTTPMSG:</code> Either the request or response was in the incorrect format. </li>
<li><code>UPNP_E_CANCELED:</code> another thread called UpnpCancelHttpGet.</li>
</ul>
Note: In case of return values, the status code parameter of the passed in handle value may provide additional information on the return value. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">Handle</td><td>The handle of the connection created by the call to <b>UpnpOpenHttpConnection</b>.  </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">buf</td><td>[in,out] The buffer to store the read item.  </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">size</td><td>[in,out] The size of the buffer to be read.  </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>The time out value sent with the request during which a response is expected from the server, failing which, an error is reported back to the user. If value is negative, timeout is infinite. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="structhttp__message__t.html#a6bf8c1b722e09bfd03df6f4a586d687e">http_message_t::amount_discarded</a>, <a class="el" href="structmembuffer.html#ac4c59c595502b1075ac517d9ea7b4743">membuffer::buf</a>, <a class="el" href="structscanner__t.html#ac1c73fcb21c8500bf51a076f5083f65f">scanner_t::cursor</a>, <a class="el" href="structhttp__message__t.html#a55fe88fcfc0ffc5c0967c0db2c082f19">http_message_t::entity</a>, <a class="el" href="structhttp__parser__t.html#aeb959ba1bd2245e16ff4b722199d6ff2">http_parser_t::entity_start_position</a>, <a class="el" href="structhttp__parser__t.html#a76839ca93d37b8bc1bbfed9c4a641a9e">http_parser_t::http_error_code</a>, <a class="el" href="structmemptr.html#acaa22842001c377190f4dba6d54430ff">memptr::length</a>, <a class="el" href="structhttp__message__t.html#a755470277c80a2a1fed7a3993b3996ec">http_message_t::msg</a>, <a class="el" href="httpparser_8h.html#aaec739c6f0ff93b139062af2ba4b0f1dafa49a399f330e793f8b8d6a7c5a05bec">PARSE_CONTINUE_1</a>, <a class="el" href="httpparser_8h.html#aaec739c6f0ff93b139062af2ba4b0f1da8a5eaa538a709e6b7baf4eab139afaaf">PARSE_FAILURE</a>, <a class="el" href="httpparser_8h.html#aaec739c6f0ff93b139062af2ba4b0f1da5900ec47943a7136371702edb225d4a3">PARSE_INCOMPLETE</a>, <a class="el" href="httpparser_8h.html#aaec739c6f0ff93b139062af2ba4b0f1da952f16db1d3b76fc3ce841a7ca836de6">PARSE_INCOMPLETE_ENTITY</a>, <a class="el" href="httpparser_8h.html#aaec739c6f0ff93b139062af2ba4b0f1da9674022bcca440239f8c53bcbd4101a0">PARSE_SUCCESS</a>, <a class="el" href="group__Sock.html#ga67327112f31ca0951ead535866375389">sock_read()</a>, <a class="el" href="group__UPnPAPI.html#ga786210c4a7442ffbd9902530675c6de5">UPNP_E_BAD_HTTPMSG</a>, <a class="el" href="group__UPnPAPI.html#gae84ce9bbb89ebe4a170956bc785fffba">UPNP_E_BAD_RESPONSE</a>, <a class="el" href="group__UPnPAPI.html#gab561a3c42133141cd595ad63491dafbc">UPNP_E_CANCELED</a>, <a class="el" href="group__UPnPAPI.html#gae3d1f52861b4d2afed68c7d46aad55c4">UPNP_E_INVALID_PARAM</a>, <a class="el" href="group__UPnPAPI.html#ga8496dde0ca68f0cd92b58db8563b73b7">UPNP_E_SUCCESS</a>, and <a class="el" href="upnpdebug_8h.html#afe489651d95ecf91dd452cdb2d5497c3">UpnpPrintf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__UPnPAPI.html#ga2a8c6776f9df10fbe99e90dd379b1909">UpnpReadHttpGet()</a>, and <a class="el" href="group__UPnPAPI.html#ga4dbd1e1309d1b6d86c082ebf4c3a78d0">UpnpReadHttpResponse()</a>.</p>

</div>
</div>
<a id="ac4f5f24f4aa10cc725b96ac5c29a88f7" name="ac4f5f24f4aa10cc725b96ac5c29a88f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4f5f24f4aa10cc725b96ac5c29a88f7">&#9670;&#160;</a></span>http_RecvMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int http_RecvMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSOCKINFO.html">SOCKINFO</a> *</td>          <td class="paramname"><span class="paramname"><em>info</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structhttp__parser__t.html">http_parser_t</a> *</td>          <td class="paramname"><span class="paramname"><em>parser</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">http_method_t</td>          <td class="paramname"><span class="paramname"><em>request_method</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>timeout_secs</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>http_error_code</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the data on the socket and take actions based on the read data to modify the parser objects buffer. </p>
<p>If an error is reported while parsing the data, the error code is passed in the http_errr_code parameter.</p>
<p>Parameters: IN <a class="el" href="structSOCKINFO.html">SOCKINFO</a> <em>info; Socket information object OUT <a class="el" href="structhttp__parser__t.html">http_parser_t</a></em> parser; HTTP parser object IN http_method_t request_method; HTTP request method IN OUT int* timeout_secs; time out OUT int* http_error_code; HTTP error code returned</p>
<dl class="section return"><dt>Returns</dt><dd>UPNP_E_SUCCESS UPNP_E_BAD_HTTPMSG </dd></dl>

<p class="reference">References <a class="el" href="structmembuffer.html#ac4c59c595502b1075ac517d9ea7b4743">membuffer::buf</a>, <a class="el" href="group__UPnPAPI.html#ga7b23201fb250f9f61c0f0b4dc9055b8e">g_maxContentLength</a>, <a class="el" href="structhttp__parser__t.html#a76839ca93d37b8bc1bbfed9c4a641a9e">http_parser_t::http_error_code</a>, <a class="el" href="structhttp__message__t.html#a755470277c80a2a1fed7a3993b3996ec">http_message_t::msg</a>, <a class="el" href="httpparser_8h.html#aaec739c6f0ff93b139062af2ba4b0f1dafa49a399f330e793f8b8d6a7c5a05bec">PARSE_CONTINUE_1</a>, <a class="el" href="httpparser_8h.html#aaec739c6f0ff93b139062af2ba4b0f1da8a5eaa538a709e6b7baf4eab139afaaf">PARSE_FAILURE</a>, <a class="el" href="httpparser_8h.html#aaec739c6f0ff93b139062af2ba4b0f1da952f16db1d3b76fc3ce841a7ca836de6">PARSE_INCOMPLETE_ENTITY</a>, <a class="el" href="httpparser_8h.html#aaec739c6f0ff93b139062af2ba4b0f1da5a7b1c01cd870b96dde1b5610fae2206">PARSE_NO_MATCH</a>, <a class="el" href="httpparser_8h.html#aaec739c6f0ff93b139062af2ba4b0f1da9674022bcca440239f8c53bcbd4101a0">PARSE_SUCCESS</a>, <a class="el" href="group__Sock.html#ga67327112f31ca0951ead535866375389">sock_read()</a>, <a class="el" href="group__UPnPAPI.html#ga786210c4a7442ffbd9902530675c6de5">UPNP_E_BAD_HTTPMSG</a>, <a class="el" href="group__UPnPAPI.html#ga90d131a9be6dbaa4a41645b148941fd0">UPNP_E_OUTOF_MEMORY</a>, <a class="el" href="group__UPnPAPI.html#ga8496dde0ca68f0cd92b58db8563b73b7">UPNP_E_SUCCESS</a>, and <a class="el" href="upnpdebug_8h.html#afe489651d95ecf91dd452cdb2d5497c3">UpnpPrintf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="gena__device_8c.html#ace7f60ea1b593eaa2396d1b6bb717a89">notify_send_and_recv()</a>.</p>

</div>
</div>
<a id="a333b21037bc6fd869e0b0b91cc073bbe" name="a333b21037bc6fd869e0b0b91cc073bbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a333b21037bc6fd869e0b0b91cc073bbe">&#9670;&#160;</a></span>http_SendMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int http_SendMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSOCKINFO.html">SOCKINFO</a> *</td>          <td class="paramname"><span class="paramname"><em>info</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>timeout_secs</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>fmt</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>...</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a message to the destination based on the format parameter. </p>
<p>fmt types: </p><ul>
<li><code>'f'</code>: arg = "const char *" file name </li>
<li><code>'b'</code>: arg1 = "const char *" mem_buffer; arg2 = "size_t" buffer length. </li>
<li><code>'I'</code>: arg = "struct SendInstruction *"</li>
</ul>
<p>E.g.: </p><pre class="fragment">       char *buf = "POST /xyz.cgi http/1.1\r\n\r\n";
       char *filename = "foo.dat";
       int status = http_SendMessage(tcpsock, "bf",
        buf, strlen(buf),       // args for memory buffer
        filename);              // arg for file
</pre><dl class="section return"><dt>Returns</dt><dd><ul>
<li><code>UPNP_E_OUTOF_MEMORY</code> </li>
<li><code>UPNP_E_FILE_READ_ERROR</code> </li>
<li><code>UPNP_E_SUCCESS</code> </li>
</ul>
</dd></dl>

<p class="reference">References <a class="el" href="structVirtualDirCallbacks.html#a899329f83782984f3da347df5f3d8ca8">VirtualDirCallbacks::close</a>, <a class="el" href="structSendInstruction.html#ac1b0dd357897b6bdd84be8fb78585323">SendInstruction::Cookie</a>, <a class="el" href="structVirtualDirCallbacks.html#a4c883b1191946a96a03e9609a4ca9885">VirtualDirCallbacks::open</a>, <a class="el" href="UpnpGlobal_8h.html#a0855108ee8c9689193118457373c7fcd">PRIzd</a>, <a class="el" href="structVirtualDirCallbacks.html#a0bf9f065c66621a62d574b6c8830f2d3">VirtualDirCallbacks::read</a>, <a class="el" href="structSendInstruction.html#a7779491801eea9576d19957ea1e778ba">SendInstruction::ReadSendSize</a>, <a class="el" href="structSendInstruction.html#a7edd1d50cc56be53dddbf790b8fab0a2">SendInstruction::RequestCookie</a>, <a class="el" href="structVirtualDirCallbacks.html#ac4e78f73e448288f260974034a6522d1">VirtualDirCallbacks::seek</a>, <a class="el" href="group__Sock.html#ga243a86adfc50dd8ce81c1b5cc64f96f1">sock_write()</a>, <a class="el" href="group__UPnPAPI.html#ga4da7eb86fb30486120cacb2d9d99dcea">UPNP_E_FILE_READ_ERROR</a>, <a class="el" href="group__UPnPAPI.html#gae794b2114cb13823dd1d7d5726cc6b29">UPNP_E_INTERNAL_ERROR</a>, <a class="el" href="group__UPnPAPI.html#ga90d131a9be6dbaa4a41645b148941fd0">UPNP_E_OUTOF_MEMORY</a>, <a class="el" href="upnpdebug_8h.html#afe489651d95ecf91dd452cdb2d5497c3">UpnpPrintf()</a>, and <a class="el" href="group__UPnPAPI.html#ga24983ed57bf9c82a82e0dc3daeaca538">virtualDirCallback</a>.</p>

<p class="reference">Referenced by <a class="el" href="#ab8610e8aea3346f682ca91fe37b21bf8">http_MakeHttpRequest()</a>, <a class="el" href="gena__device_8c.html#ace7f60ea1b593eaa2396d1b6bb717a89">notify_send_and_recv()</a>, <a class="el" href="gena__device_8c.html#aea18ab9fac53047c7e10fe1f1a37db4a">respond_ok()</a>, <a class="el" href="soap__device_8c.html#a0da1c88edfef970890883f372e4c8b67">send_action_response()</a>, <a class="el" href="soap__device_8c.html#a6b79c8004c0d263284ab7279205c142c">send_error_response()</a>, <a class="el" href="soap__device_8c.html#ab750e76d3a100306fecaed69238c0df6">send_var_query_response()</a>, and <a class="el" href="webserver_8c.html#abb77fc2cfdf0dfbd97e5b3880c4b18d1">web_server_callback()</a>.</p>

</div>
</div>
<a id="a55e7bd2e48918bcaf6b101f174e0b355" name="a55e7bd2e48918bcaf6b101f174e0b355"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55e7bd2e48918bcaf6b101f174e0b355">&#9670;&#160;</a></span>http_WriteHttpRequest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int http_WriteHttpRequest </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>handle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *</td>          <td class="paramname"><span class="paramname"><em>size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>timeout</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes the content of a HTTP request initiated by a <b>UpnpMakeHttpRequest</b> call. The end of the content should be indicated by a call to <b>UpnpEndHttpRequest</b>. </p>
<dl class="section return"><dt>Returns</dt><dd>An integer representing one of the following: <ul>
<li><code>UPNP_E_SUCCESS:</code> The operation completed successfully. </li>
<li><code>UPNP_E_INVALID_PARAM:</code> Either <b>handle</b>, <b>buf</b> or <b>size</b> is not a valid pointer. </li>
<li><code>UPNP_E_SOCKET_WRITE:</code> An error or timeout occurred writing to a socket. </li>
<li><code>UPNP_E_OUTOF_SOCKET:</code> Too many sockets are currently allocated. </li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">Handle</td><td>The handle of the connection created by the call to <b>UpnpOpenHttpConnection</b>.  </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>The buffer containing date to be written.  </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>The size, in bytes of <b>buf</b>.  </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>A timeout value sent with the request during which a response is expected from the server, failing which, an error is reported. If value is negative, timeout is infinite. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="group__Sock.html#ga243a86adfc50dd8ce81c1b5cc64f96f1">sock_write()</a>, <a class="el" href="group__UPnPAPI.html#gae3d1f52861b4d2afed68c7d46aad55c4">UPNP_E_INVALID_PARAM</a>, <a class="el" href="group__UPnPAPI.html#ga90d131a9be6dbaa4a41645b148941fd0">UPNP_E_OUTOF_MEMORY</a>, and <a class="el" href="group__UPnPAPI.html#ga8496dde0ca68f0cd92b58db8563b73b7">UPNP_E_SUCCESS</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__UPnPAPI.html#ga6794b5f98e814417967fc8fe1c44c6f5">UpnpWriteHttpPost()</a>, and <a class="el" href="group__UPnPAPI.html#gaccbd92c541367e88598a5126fa97b2fb">UpnpWriteHttpRequest()</a>.</p>

</div>
</div>
<a id="a7af01be59d73efff91c5216130845b00" name="a7af01be59d73efff91c5216130845b00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7af01be59d73efff91c5216130845b00">&#9670;&#160;</a></span>ReadResponseLineAndHeaders()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ReadResponseLineAndHeaders </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSOCKINFO.html">SOCKINFO</a> *</td>          <td class="paramname"><span class="paramname"><em>info</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structhttp__parser__t.html">http_parser_t</a> *</td>          <td class="paramname"><span class="paramname"><em>parser</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>timeout_secs</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>http_error_code</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parses already exiting data. If not complete reads more data on the connected socket. The read data is then parsed. The same methid is carried out for headers. </p>
<dl class="section return"><dt>Returns</dt><dd>integer: <ul>
<li><code>PARSE_OK</code> - On Success </li>
<li><code>PARSE_FAILURE</code> - Failure to parse data correctly </li>
<li><code>UPNP_E_BAD_HTTPMSG</code> - Socker read() returns an error </li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">info</td><td>Socket information object.  </td></tr>
    <tr><td class="paramname">parser</td><td>HTTP Parser object.  </td></tr>
    <tr><td class="paramname">timeout_secs</td><td>Time out value.  </td></tr>
    <tr><td class="paramname">http_error_code</td><td>HTTP errror code returned. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="structhttp__parser__t.html#a76839ca93d37b8bc1bbfed9c4a641a9e">http_parser_t::http_error_code</a>, <a class="el" href="structhttp__message__t.html#a755470277c80a2a1fed7a3993b3996ec">http_message_t::msg</a>, <a class="el" href="httpparser_8h.html#aaec739c6f0ff93b139062af2ba4b0f1da8a5eaa538a709e6b7baf4eab139afaaf">PARSE_FAILURE</a>, <a class="el" href="httpparser_8h.html#aaec739c6f0ff93b139062af2ba4b0f1da5900ec47943a7136371702edb225d4a3">PARSE_INCOMPLETE</a>, <a class="el" href="httpparser_8h.html#aaec739c6f0ff93b139062af2ba4b0f1dac6100102562753aa9aa43bd7885baa6e">PARSE_OK</a>, <a class="el" href="group__Sock.html#ga67327112f31ca0951ead535866375389">sock_read()</a>, and <a class="el" href="group__UPnPAPI.html#ga786210c4a7442ffbd9902530675c6de5">UPNP_E_BAD_HTTPMSG</a>.</p>

<p class="reference">Referenced by <a class="el" href="#ab8095d987290dfdc4f151dc8e3d7c40f">http_GetHttpResponse()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
