<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libUPnP: /Users/mylhyz/Downloads/libupnp-1.14.18/upnp/src/ssdp/ssdp_server.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libUPnP<span id="projectnumber">&#160;1.14.18</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_500eb3075243de088213ee7b504b6a30.html">upnp</a></li><li class="navelem"><a class="el" href="dir_9eafd26b178b581de33acfe950a9348a.html">src</a></li><li class="navelem"><a class="el" href="dir_0114cc0f9ef16fd759c9fd4c3f4fa5b6.html">ssdp</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">ssdp_server.c File Reference<div class="ingroups"><a class="el" href="group__SSDPlib.html">SSDP Library</a></div></div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;config.h&quot;</code><br />
<code>#include &quot;<a class="el" href="ssdplib_8h_source.html">ssdplib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ThreadPool_8h_source.html">ThreadPool.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="httpparser_8h_source.html">httpparser.h</a>&quot;</code><br />
<code>#include &quot;httpreadwrite.h&quot;</code><br />
<code>#include &quot;<a class="el" href="membuffer_8h_source.html">membuffer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="miniserver_8h_source.html">miniserver.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sock_8h_source.html">sock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="upnpapi_8h_source.html">upnpapi.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &quot;posix_overwrites.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ssdp_server.c:</div>
<div class="dyncontent">
<div class="center"><img src="ssdp__server_8c__incl.png" border="0" usemap="#a_2Users_2mylhyz_2Downloads_2libupnp-1_814_818_2upnp_2src_2ssdp_2ssdp__server_8c" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structSSDPSockArray.html">SSDPSockArray</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga14f201b412acf30f136e07de1ee0a2f5" id="r_ga14f201b412acf30f136e07de1ee0a2f5"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_TIME_TOREAD</b>&#160;&#160;&#160;45</td></tr>
<tr class="separator:ga14f201b412acf30f136e07de1ee0a2f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga6f22f7819d31d7751bc1af2d8d3de722" id="r_ga6f22f7819d31d7751bc1af2d8d3de722"><td class="memItemLeft" align="right" valign="top"><a id="ga6f22f7819d31d7751bc1af2d8d3de722" name="ga6f22f7819d31d7751bc1af2d8d3de722"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>Listener</b> { <b>Idle</b>
, <b>Stopping</b>
, <b>Running</b>
 }</td></tr>
<tr class="separator:ga6f22f7819d31d7751bc1af2d8d3de722"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga9eb826c78af2e4ef0cfba38ca14436f8" id="r_ga9eb826c78af2e4ef0cfba38ca14436f8"><td class="memItemLeft" align="right" valign="top">
void&#160;</td><td class="memItemRight" valign="bottom"><b>RequestHandler</b> ()</td></tr>
<tr class="separator:ga9eb826c78af2e4ef0cfba38ca14436f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafa4ff1b9a76c97d7eec4c86b51a0954a" id="r_gafa4ff1b9a76c97d7eec4c86b51a0954a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSDPlib.html#gafa4ff1b9a76c97d7eec4c86b51a0954a">free_ssdp_event_handler_data</a> (void *the_data)</td></tr>
<tr class="memdesc:gafa4ff1b9a76c97d7eec4c86b51a0954a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the ssdp request.  <br /></td></tr>
<tr class="separator:gafa4ff1b9a76c97d7eec4c86b51a0954a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafe54c2d33e20700b10dfdb2fd8173be5" id="r_gafe54c2d33e20700b10dfdb2fd8173be5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="UpnpGlobal_8h.html#aeecd12a6454cebddf6288c822d09422d">UPNP_INLINE</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSDPlib.html#gafe54c2d33e20700b10dfdb2fd8173be5">valid_ssdp_msg</a> (<a class="el" href="structhttp__message__t.html">http_message_t</a> *hmsg)</td></tr>
<tr class="memdesc:gafe54c2d33e20700b10dfdb2fd8173be5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does some quick checking of the ssdp msg.  <br /></td></tr>
<tr class="separator:gafe54c2d33e20700b10dfdb2fd8173be5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6c4d57ca8cbe9721df0a2b0a44be3505" id="r_ga6c4d57ca8cbe9721df0a2b0a44be3505"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="UpnpGlobal_8h.html#aeecd12a6454cebddf6288c822d09422d">UPNP_INLINE</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSDPlib.html#ga6c4d57ca8cbe9721df0a2b0a44be3505">start_event_handler</a> (void *Data)</td></tr>
<tr class="memdesc:ga6c4d57ca8cbe9721df0a2b0a44be3505"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses the message and dispatches it to a handler which handles the ssdp request msg.  <br /></td></tr>
<tr class="separator:ga6c4d57ca8cbe9721df0a2b0a44be3505"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeced5b9c3907ac30d3006b1a162872a1" id="r_gaeced5b9c3907ac30d3006b1a162872a1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSDPlib.html#gaeced5b9c3907ac30d3006b1a162872a1">ssdp_event_handler_thread</a> (void *the_data)</td></tr>
<tr class="memdesc:gaeced5b9c3907ac30d3006b1a162872a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is a thread that handles SSDP requests.  <br /></td></tr>
<tr class="separator:gaeced5b9c3907ac30d3006b1a162872a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7fef01c9ea728feb6bf891b0bcd9442a" id="r_ga7fef01c9ea728feb6bf891b0bcd9442a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSDPlib.html#ga7fef01c9ea728feb6bf891b0bcd9442a">create_ssdp_sock_v4</a> (<a class="el" href="group__Sock.html#ga8dc8083897335125630f1af5dafd5831">SOCKET</a> *ssdpSock)</td></tr>
<tr class="separator:ga7fef01c9ea728feb6bf891b0bcd9442a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga379ec5202c163fd4c27dca3dd29fa85b" id="r_ga379ec5202c163fd4c27dca3dd29fa85b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSDPlib.html#ga379ec5202c163fd4c27dca3dd29fa85b">create_ssdp_sock_reqv4</a> (<a class="el" href="group__Sock.html#ga8dc8083897335125630f1af5dafd5831">SOCKET</a> *ssdpReqSock)</td></tr>
<tr class="memdesc:ga379ec5202c163fd4c27dca3dd29fa85b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the SSDP IPv4 socket to be used by the control point.  <br /></td></tr>
<tr class="separator:ga379ec5202c163fd4c27dca3dd29fa85b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">SSDP Server Functions</div></td></tr>
<tr class="memitem:ga298b1186e6cb223cf194453e141d1b29" id="r_ga298b1186e6cb223cf194453e141d1b29"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSDPlib.html#ga298b1186e6cb223cf194453e141d1b29">AdvertiseAndReply</a> (int AdFlag, <a class="el" href="group__UPnPAPI.html#gaa90371a4578eb8a96a2e0d21ced90960">UpnpDevice_Handle</a> Hnd, enum <a class="el" href="group__SSDPlib.html#gaf02d8708a05f0c2fc97df242360e70f7">SsdpSearchType</a> SearchType, struct sockaddr *DestAddr, char *DeviceType, char *DeviceUDN, char *ServiceType, int Exp)</td></tr>
<tr class="memdesc:ga298b1186e6cb223cf194453e141d1b29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends SSDP advertisements, replies and shutdown messages.  <br /></td></tr>
<tr class="separator:ga298b1186e6cb223cf194453e141d1b29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae3e29279280d276d05762d9dbeffe31d" id="r_gae3e29279280d276d05762d9dbeffe31d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSDPlib.html#gae3e29279280d276d05762d9dbeffe31d">unique_service_name</a> (char *cmd, <a class="el" href="group__SSDPlib.html#ga5b5a08baa4d776fc42ea718647c4c4ae">SsdpEvent</a> *Evt)</td></tr>
<tr class="memdesc:gae3e29279280d276d05762d9dbeffe31d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fills the fields of the event structure like DeviceType, Device UDN and Service Type.  <br /></td></tr>
<tr class="separator:gae3e29279280d276d05762d9dbeffe31d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa9bf78fccd29b5d5b8c7788f897e3326" id="r_gaa9bf78fccd29b5d5b8c7788f897e3326"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="group__SSDPlib.html#gaf02d8708a05f0c2fc97df242360e70f7">SsdpSearchType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSDPlib.html#gaa9bf78fccd29b5d5b8c7788f897e3326">ssdp_request_type1</a> (char *cmd)</td></tr>
<tr class="memdesc:gaa9bf78fccd29b5d5b8c7788f897e3326"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function figures out the type of the SSDP search in the in the request.  <br /></td></tr>
<tr class="separator:gaa9bf78fccd29b5d5b8c7788f897e3326"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3096b77d16b0ab09d3d0ec540fb09016" id="r_ga3096b77d16b0ab09d3d0ec540fb09016"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSDPlib.html#ga3096b77d16b0ab09d3d0ec540fb09016">ssdp_request_type</a> (char *cmd, <a class="el" href="group__SSDPlib.html#ga5b5a08baa4d776fc42ea718647c4c4ae">SsdpEvent</a> *Evt)</td></tr>
<tr class="memdesc:ga3096b77d16b0ab09d3d0ec540fb09016"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts filling the SSDP event structure based upon the request received.  <br /></td></tr>
<tr class="separator:ga3096b77d16b0ab09d3d0ec540fb09016"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf3e17308ebc31e7e81c476624487614c" id="r_gaf3e17308ebc31e7e81c476624487614c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSDPlib.html#gaf3e17308ebc31e7e81c476624487614c">readFromSSDPSocket</a> (<a class="el" href="group__Sock.html#ga8dc8083897335125630f1af5dafd5831">SOCKET</a> socket)</td></tr>
<tr class="memdesc:gaf3e17308ebc31e7e81c476624487614c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function reads the data from the ssdp socket.  <br /></td></tr>
<tr class="separator:gaf3e17308ebc31e7e81c476624487614c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga60739b2f340e6bdeedcf8f282d9578c8" id="r_ga60739b2f340e6bdeedcf8f282d9578c8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SSDPlib.html#ga60739b2f340e6bdeedcf8f282d9578c8">get_ssdp_sockets</a> (<a class="el" href="structMServerSockArray.html">MiniServerSockArray</a> *out)</td></tr>
<tr class="memdesc:ga60739b2f340e6bdeedcf8f282d9578c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the IPv4 and IPv6 ssdp sockets required by the control point and device operation.  <br /></td></tr>
<tr class="separator:ga60739b2f340e6bdeedcf8f282d9578c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gae7b203d9c8f465e0731f0547e83686a6" id="r_gae7b203d9c8f465e0731f0547e83686a6"><td class="memItemLeft" align="right" valign="top">
<a class="el" href="group__Sock.html#ga8dc8083897335125630f1af5dafd5831">SOCKET</a>&#160;</td><td class="memItemRight" valign="bottom"><b>gSsdpReqSocket4</b> = <a class="el" href="group__Sock.html#ga26769957ec1a2beaf223f33b66ee64ab">INVALID_SOCKET</a></td></tr>
<tr class="separator:gae7b203d9c8f465e0731f0547e83686a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga37a9f79053731207cd303930a24691db" id="r_ga37a9f79053731207cd303930a24691db"><td class="memItemLeft" align="right" valign="top">
static const char&#160;</td><td class="memItemRight" valign="bottom"><b>SERVICELIST_STR</b> [] = &quot;serviceList&quot;</td></tr>
<tr class="separator:ga37a9f79053731207cd303930a24691db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
